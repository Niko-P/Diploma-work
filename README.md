
# Тестирование сайта Читай-город

## Шаблон для автоматизации тестирования на Python

Интернет-магазин книг Читай-город.

Сайт: [https://www.chitai-gorod.ru/](https://www.chitai-gorod.ru/)

### Стек технологий:
- **pytest**
- **selenium**
- **requests**
- **allure-pytest**

### Основной функционал для тестирования:
- Авторизация
- Поиск товаров
- Работа с корзиной
- Оформление заказа

### Требования к системе:

1. **Авторизация**: Пользователь должен иметь возможность авторизоваться на сайте.
2. **Поиск товара**: Пользователь должен иметь возможность найти товар по поисковому запросу.
3. **Работа с корзиной**: 
   - Пользователь должен иметь возможность добавить книгу в корзину.
   - Пользователь должен иметь возможность изменять количество экземпляров книги.
   - Пользователь должен иметь возможность удалять книгу из корзины.
4. **Оформление заказа**: Пользователь должен иметь возможность оформить заказ на покупку товаров.

## Шаги для запуска проекта:

1. Склонируйте проект:
   ```bash
   git clone https://github.com/Niko-P/Diploma_work.git
   ```
   
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. **Определите ключ авторизации**:
   Для этого авторизируйтесь на сайте https://www.chitai-gorod.ru/. В DevTools на закладке **Network** найдите элемент `{;}short;` и в разделе **Request Headers** найдите ключ авторизации (Authorization). Ключ должен использоваться без префикса `Bearer`. Создайте файл с названием .env в главной директории проекта, в который скопируйте строку из скобок (BEARER_TOKEN=Заменить_Этот_Текст_На_Полученный_Ключ_Авторизации).

4. Запустите тесты с указанием пути к директории для сохранения результатов:
   ```bash
   pytest --alluredir allure_files
   ```

5. Откройте отчет о тестировании:
   ```bash
   allure serve allure_files
   ```

6. **Рекомендация**: Перед запуском тестов отключите VPN, так как это может повлиять на доступ к некоторым ресурсам.

## Структура проекта:

```
.
├── config.py             # Настройки проекта (например, URL, токены)
├── conftest.py           # Файл для настройки фикстур или хелперов
├── pytest.ini            # Конфигурация pytest
├── requirements.txt      # Список зависимостей
├── README.md             # Документация
├── test                  # Тесты
│   ├── __init__.py
│   ├── test_api.py       # API тесты
│   └── test_ui.py        # UI тесты
├── pages                 # Описание страниц
│   ├── __init__.py
│   ├── SearchApi.py      # Методы API
│   ├── MainPage.py       # Методы главной страницы
│   └── ResultPage.py     # Методы страницы результатов
└── .gitignore            # Игнорируемые файлы (например, pycache, pytest_cache)
```

## Полезные ссылки:
- [Веб-интерфейс сервиса Читай-Город](https://www.chitai-gorod.ru/)

## Библиотеки:

Установите необходимые библиотеки:

```bash
pip3 install pytest
pip3 install selenium
pip3 install webdriver-manager
pip3 install allure-pytest
pip3 install requests
```

## Запуск тестов:

- Для запуска только UI тестов:
  ```bash
  pytest -m ui_test.py
  ```

- Для запуска только API тестов:
  ```bash
  pytest -m api_test.py
  ```

- Для запуска тестов с сохранением отчета о результатах:
  ```bash
  pytest --alluredir allure-result
  ```

- Для формирования отчета о тестировании:
  ```bash
  allure serve allure-result/
  ```

